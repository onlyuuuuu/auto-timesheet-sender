import java.time.LocalDateTime
import java.time.format.DateTimeFormatter

plugins {
    id 'java'
}

group = 'com.onlyu'

repositories {
    mavenLocal()
    mavenCentral()
}

wrapper {
    gradleVersion = '8.10.2'
}

dependencies {
    implementation 'org.apache.poi:poi-ooxml:5.3.0'
    implementation 'org.apache.logging.log4j:log4j-core:2.23.1'
    implementation 'jakarta.mail:jakarta.mail-api:2.1.3'
    implementation 'org.eclipse.angus:jakarta.mail:2.0.3'
}

jar {
    archiveBaseName.set(project.name)
    duplicatesStrategy = DuplicatesStrategy.INCLUDE
    manifest {
        attributes(
            'Main-Class': 'com.onlyu.auto.AutoUpdater',
            'Built-By': 'onlyu',
            'Built-Date': LocalDateTime.now().format(DateTimeFormatter.ISO_LOCAL_DATE_TIME),
            'Built-JDK': System.getProperty('java.version'),
            'Built-Gradle': gradle.gradleVersion,
        )
    }
    from {
        configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
    }
}
